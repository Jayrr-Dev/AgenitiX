/* =====================================================================
   global.css — Tailwind v4 + conic-border animations (Vercel-safe)
   ===================================================================== */

/* 1 · Tailwind & Google Fonts --------------------------------------- */
@import 'tailwindcss';
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Work+Sans:wght@400;600&family=Source+Serif+Pro:ital,wght@0,400;1,400&display=swap')
  layer(utilities);

/* 2 · Custom-property registration (only animating vars) ------------ */
@property --fill-transparency-left  { syntax:'<percentage>'; inherits:true; initial-value:1%;   }
@property --fill-transparency-right { syntax:'<percentage>'; inherits:true; initial-value:100%; }
@property --fill-angle-left         { syntax:'<angle>';      inherits:true; initial-value:180deg; }
@property --fill-angle-right        { syntax:'<angle>';      inherits:true; initial-value:180deg; }
@property --angle                   { syntax:'<angle>';      inherits:true; initial-value:0deg;  }

/* 3 · Theme tokens -------------------------------------------------- */
@theme {
  --font-sans  : 'Inter', system-ui, sans-serif;
  --font-ui    : 'Work Sans', sans-serif;
  --font-serif : 'Source Serif Pro', serif;
  --font-brand : var(--font-sans);

  --radius-lg  : 0.5rem;

  /* dark-first palette */
  --background           : 0 0% 6%;
  --foreground           : 0 0% 98%;
  --primary              : 0 0% 98%;
  --primary-foreground   : 0 0% 6%;
  --secondary            : 210 100% 54%;
  --secondary-foreground : 0 0% 100%;
  --muted                : 0 0% 18%;
  --muted-foreground     : 0 0% 70%;
  --border               : var(--muted);

  /* shorthand animations */
  --animate-fill-transparency :
      fill-left-transparency  2s forwards,
      fill-right-transparency 2s forwards;
  --animate-rotate-border     : rotate-border 3s linear infinite;
}

/* 4 · Keyframes ----------------------------------------------------- */
@layer utilities {
  @keyframes rotate-border { from { --angle: 0deg; } to { --angle: 360deg; } }

  @keyframes fill-left-transparency  { from { --fill-transparency-left : 0%; } to { --fill-transparency-left :100%; } }
  @keyframes fill-right-transparency { from { --fill-transparency-right:100%; } to { --fill-transparency-right: 0%; } }
}

/* 5 · Utility classes (top-level, v4-safe) -------------------------- */
/* token helpers */
@utility bg-background   { background-color: hsl(var(--background)); }
@utility text-foreground { color          : hsl(var(--foreground)); }
@utility border-border   { border-color   : hsl(var(--border));     }

/* trigger the twin transparency sweeps */
@utility animate-fill-transparency {
  animation: var(--animate-fill-transparency);
}

/* rotating border (unchanged) */
@utility bg-spinning-border {
  background:
    conic-gradient(from var(--angle), #213, #112 5%, #112 60%, #213 95%) padding-box,
    conic-gradient(from var(--angle), transparent 25%, #08f, #f03 95%, transparent) border-box,
    conic-gradient(from var(--angle), #213, #112 5%, #112 60%, #213 95%) border-box;
}

/* border that fills from both edges toward centre */
@utility bg-fill-border {
  background:
    linear-gradient(background, background) padding-box,

    /* right sweep (sentinel stop so var() isn’t last) */
    conic-gradient(
      from var(--fill-angle-right),
      transparent var(--fill-transparency-right),
      #08f,
      #f03 100%,
      transparent,
      rgba(0,0,0,0) 101%) border-box,

    /* left sweep (same pattern) */
    conic-gradient(
      from var(--fill-angle-left),
      #f03,
      #08f,
      transparent var(--fill-transparency-left),
      rgba(0,0,0,0) 101%) border-box,

    /* static inner texture */
    conic-gradient(
      from var(--fill-angle-left),
      #213, #112 5%, #112 60%, #213 95%) border-box;
}

/* same stack without base colour — good for text clips */
@utility bg-fill-content {
  background:
    conic-gradient(
      from var(--fill-angle-right),
      transparent var(--fill-transparency-right),
      #08f,
      #f03 100%,
      transparent,
      rgba(0,0,0,0) 101%) border-box,
    conic-gradient(
      from var(--fill-angle-left),
      #f03,
      #08f,
      transparent var(--fill-transparency-left),
      rgba(0,0,0,0) 101%) border-box,
    conic-gradient(
      from var(--fill-angle-left),
      #213, #112 5%, #112 60%, #213 95%) border-box;
}

/* 6 · Base layer ---------------------------------------------------- */
@layer base {
  *, ::before, ::after, ::backdrop, ::file-selector-button { @apply border-border; }

  .light {
    --background : 0 0% 100%;
    --foreground : 222 47% 11%;
    --border     : 220 14% 91%;
  }

  body { @apply bg-background text-foreground antialiased; }

  .font-ui    { font-family: var(--font-ui);    }
  .font-serif { font-family: var(--font-serif); }
  .font-brand { font-family: var(--font-brand); font-weight:700; }
}

/* -------------------------------------------------------------------
   Example usage (remove in real code)
.element {
  @apply bg-fill-border hover:animate-fill-transparency;
}
------------------------------------------------------------------- */
